{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport router from 'next/router';\nimport { isEmpty } from '@lib/index';\nimport axios from 'axios';\nvar client = axios.create({\n  baseURL: 'https://web-api.improver.com.tr/api/project/v1'\n});\nclient.defaults.timeout = 20000;\nclient.interceptors.response.use(function (config) {\n  return config;\n}, function (error) {\n  var expectedError = error.response && error.response.status >= 400 && error.response.status < 500;\n\n  if (!expectedError) {\n    // toast.error('An unexpected error occurrred.');\n    console.error(error);\n  }\n\n  if (error.response.status === 401) {\n    // store.dispatch(logout(''));\n    router.push('/login');\n  }\n\n  return Promise.reject(error);\n});\n\nvar call = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(method, url) {\n    var data,\n        accessToken,\n        headers,\n        request,\n        response,\n        err,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            data = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n            accessToken = localStorage.getItem('token');\n            headers = {\n              Accept: 'application/json',\n              'Content-Type': 'application/json'\n            };\n\n            if (accessToken) {\n              client.defaults.headers.common['Authorization'] = 'Bearer ' + accessToken;\n            }\n\n            request = {\n              headers: headers,\n              method: method,\n              url: url\n            };\n\n            if (!isEmpty(data)) {\n              if (method === 'get') {\n                request.params = data;\n              } else {\n                request.data = data;\n              }\n            }\n\n            _context.prev = 6;\n            _context.next = 9;\n            return client(request);\n\n          case 9:\n            response = _context.sent;\n            return _context.abrupt(\"return\", Promise.resolve(response.data));\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](6);\n            err = null;\n\n            if (_context.t0.response) {\n              err = _context.t0.response;\n            } else if (_context.t0.request) {\n              err = {\n                message: _context.t0.request._response\n              };\n            } else {\n              err = _context.t0;\n            }\n\n            return _context.abrupt(\"return\", Promise.reject(err));\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n\n  return function call(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _file = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url, data, onUploadProgress) {\n    var headers, response;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            headers = {\n              Accept: 'application/json',\n              'Content-Type': 'multipart/form-data'\n            };\n            _context2.next = 4;\n            return client({\n              url: url,\n              data: data,\n              method: 'post',\n              headers: headers,\n              onUploadProgress: onUploadProgress\n            });\n\n          case 4:\n            response = _context2.sent;\n            return _context2.abrupt(\"return\", Promise.resolve(response.data));\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            return _context2.abrupt(\"return\", Promise.reject(_context2.t0.response));\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 8]]);\n  }));\n\n  return function file(_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default {\n  \"delete\": function _delete(url, data) {\n    return call('delete', url, data);\n  },\n  get: function get(url, data) {\n    return call('get', url, data);\n  },\n  patch: function patch(url, data) {\n    return call('patch', url, data);\n  },\n  post: function post(url, data) {\n    return call('post', url, data);\n  },\n  put: function put(url, data) {\n    return call('put', url, data);\n  },\n  file: function file(url, data, onUploadProgress) {\n    return _file(url, data, onUploadProgress);\n  }\n};","map":{"version":3,"sources":["C:/Users/Ali/Desktop/improver/gate/api.ts"],"names":["router","isEmpty","axios","client","create","baseURL","defaults","timeout","interceptors","response","use","config","error","expectedError","status","console","push","Promise","reject","call","method","url","data","accessToken","localStorage","getItem","headers","Accept","common","request","params","resolve","err","message","_response","file","onUploadProgress","get","patch","post","put"],"mappings":"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","sourcesContent":["import router from 'next/router';\r\nimport { isEmpty } from '@lib/index';\r\nimport axios, { Method } from 'axios';\r\n\r\nconst client = axios.create({\r\n    baseURL: 'https://web-api.improver.com.tr/api/project/v1',\r\n});\r\n\r\nclient.defaults.timeout = 20000;\r\nclient.interceptors.response.use(\r\n    (config) => config,\r\n    (error: any) => {\r\n        const expectedError =\r\n            error.response && error.response.status >= 400 && error.response.status < 500;\r\n\r\n        if (!expectedError) {\r\n            // toast.error('An unexpected error occurrred.');\r\n            console.error(error);\r\n        }\r\n        if (error.response.status === 401) {\r\n            // store.dispatch(logout(''));\r\n            router.push('/login');\r\n        }\r\n        return Promise.reject(error);\r\n    },\r\n);\r\n\r\nconst call = async <T>(method: Method, url: string, data: any = {}): Promise<T> => {\r\n    const accessToken = localStorage.getItem('token');\r\n\r\n    const headers = {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n    };\r\n\r\n    if (accessToken) {\r\n        client.defaults.headers.common['Authorization'] = 'Bearer ' + accessToken;\r\n    }\r\n\r\n    const request: any = { headers, method, url };\r\n\r\n    if (!isEmpty(data)) {\r\n        if (method === 'get') {\r\n            request.params = data;\r\n        } else {\r\n            request.data = data;\r\n        }\r\n    }\r\n\r\n    try {\r\n        const response = await client(request);\r\n        return Promise.resolve(response.data);\r\n    } catch (error) {\r\n        let err = null;\r\n        if (error.response) {\r\n            err = error.response;\r\n        } else if (error.request) {\r\n            err = { message: error.request._response };\r\n        } else {\r\n            err = error;\r\n        }\r\n        return Promise.reject(err);\r\n    }\r\n};\r\n\r\nconst file = async (\r\n    url: string,\r\n    data: FormData,\r\n    onUploadProgress?: ((progressEvent: any) => void) | undefined,\r\n) => {\r\n    try {\r\n        const headers = {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'multipart/form-data',\r\n        };\r\n        const response = await client({\r\n            url,\r\n            data,\r\n            method: 'post',\r\n            headers,\r\n            onUploadProgress,\r\n        });\r\n\r\n        return Promise.resolve(response.data);\r\n    } catch (error) {\r\n        return Promise.reject(error.response);\r\n    }\r\n};\r\n\r\nexport default {\r\n    delete: <T, D = any>(url: string, data?: D | null) => call<T>('delete', url, data),\r\n    get: <T, D = any>(url: string, data?: D | null) => call<T>('get', url, data),\r\n    patch: <T, D = any>(url: string, data?: D | null) => call<T>('patch', url, data),\r\n    post: <T, D = any>(url: string, data?: D | null) => call<T>('post', url, data),\r\n    put: <T, D = any>(url: string, data?: D | null) => call<T>('put', url, data),\r\n    file: (\r\n        url: string,\r\n        data: FormData,\r\n        onUploadProgress: ((progressEvent: any) => void) | undefined,\r\n    ) => file(url, data, onUploadProgress),\r\n};\r\n"]},"metadata":{},"sourceType":"module"}